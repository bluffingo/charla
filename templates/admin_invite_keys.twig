{% extends "_layout_admin.twig" %}

{% set title = "Invite keys" %}

	{% block admincontent %}
        <div class="content-box">
            <div class="content-box">
                <form name="inviteKeyGenerationForm" id="inviteKeyGenerationForm" method="post"
                      action="/admin/invitekeys" enctype="multipart/form-data">
                    <input type="hidden" id="action" name="action" value="generate_invite_key"/>
                    <input class="button button-primary button-huge" type="submit" id="generate" name="generate"
                           value="Generate invite key">
                </form>
                <p>
                    If you give an invitation key to a bad actor, you <strong>will</strong> be demoted.
                </p>
            </div>
            <div class="content-box no-border-top">
                <div class="section">
                    <div class="section-header">
                        <div class="section-header-left">
                            <h1 class="section-title">All invite keys</h1>
                        </div>
                    </div>
                    <table class="c1">
                        <tr class="h">
                            <th>Invite Key</th>
                            <th>Generated By</th>
                            <th>Claimed By</th>
                        </tr>
                        {% for inviteKey in data.invites %}
                            <tr style="height: 30px;">
                                <td>
                                    <pre>{{ inviteKey.invite_key }}</pre>
                                </td>
                                <td>
                                    {{ inviteKey.generated_by.name }}
                                    <small>({{ inviteKey.generated_time | date('F jS Y') }}
                                        / {{ inviteKey.generated_time | relative_time }})</small>
                                </td>
                                <td>
                                    {% if inviteKey.claimed_by %}
                                        {{ inviteKey.claimed_by.name }}
                                        <small>({{ inviteKey.claimed_time | date('F jS Y') }}
                                            /{{ inviteKey.claimed_time | relative_time }})</small>
                                    {% else %}
                                        Unclaimed
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        </div>
    {% endblock %}